### 一、引入：什么是 EVM 存储？
- 合约状态存储在每个账户的 Storage 中
    
- 以太坊的 Storage 是一张超大的哈希表：
    
    solidity
    
    复制编辑
    
    `mapping(bytes32 => bytes32) storage;`
    
- 每个合约有自己独立的一份，存储位置由编译器决定


---
### 二、 🧩 EVM 中的两种值类型

### ✅ 基本类型（Value Types）

- **定义**：直接存储值的数据类型，变量之间赋值是复制值本身。
    
- **常见类型**：
    
    - `uint`, `int`
        
    - `bool`
        
    - `address`
        
    - `bytes1` 到 `bytes32`
        
- **存储特性**：
    
    - 分配在固定的 `storage slot`
        
    - 赋值是值复制（copy by value）
        

---

### 📦 引用类型（Reference Types）

- **定义**：存储的是对数据的“引用”或“指针”，赋值传的是地址。
    
- **常见类型**：
    
    - `array`（数组）
        
    - `mapping`（映射）
        
    - `struct`（结构体）
        
- **存储特性**：
    
    - 变量本身保存的是对实际数据的引用
        
    - 赋值是引用复制（copy by reference）
        
    - 需要 `keccak256(slot)` 来定位实际数据地址（尤其是动态结构）