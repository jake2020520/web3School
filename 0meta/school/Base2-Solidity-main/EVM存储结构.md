### 一、EVM 的数据结构
- 基于栈的架构：EVM 使用栈来存储数据，最大支持 1024 个栈元素，每个元素是 256 位的字（word），所有计算都在栈上完成。
    
- 三类存储结构：

  1. **程序代码存储区（ROM）**：不可变，存储智能合约的字节码。
  2. **内存（Memory）**：可变，临时存储执行期间的数据，随调用结束而清除。
  3. **存储（Storage）**：持久化存储，每个智能合约都有一个唯一的存储区，存储合约状态。



### 二、 EVM 中的两种值类型

- 基本类型（Value Types）

  - **定义**：直接存储值的数据类型，变量之间赋值是复制值本身。  
  - **常见类型**：`uint`, `int`, `bool`, `address`, `bytes1` 到 `bytes32`    
  - **存储特性**：
    - 分配在固定的 `storage slot`      
    - 赋值是值复制（copy by value）
        
- 引用类型（Reference Types）

  - **定义**：存储的是对数据的“引用”或“指针”，赋值传的是地址。
    
  - **常见类型**：`array`（数组）,`mapping`（映射）,`struct`（结构体）
        
  - **存储特性**：
    
    - 变量本身保存的是对实际数据的引用
        
    - 赋值是引用复制（copy by reference）
        
    - 需要 `keccak256(slot)` 来定位实际数据地址（尤其是动态结构）